spring:
  data:
    redis:
        host: ${REDIS_HOST:localhost}
        port: ${REDIS_PORT:6379}

  ldap:
    # LDAP服务器URL，可以是多个，用逗号分隔
    urls: ldap://localhost:389
    # LDAP管理员DN（用于绑定和搜索用户）
    username: cn=admin,dc=mycompany,dc=com
    # LDAP管理员密码
    password: admin
    # 基础DN
    base: dc=mycompany,dc=com

  security:
    ldap:
#      # 用户DN模式（可选，如果指定则直接使用该模式构建用户DN）
#      user-dn-pattern: uid={0},ou=people
      # 用户搜索基础DN
      user-search-base: ou=people
      # 用户搜索过滤器，{0}会被替换为用户名
      user-search-filter: (uid={0})
#      # 组搜索基础DN
#      group-search-base: ou=groups
#      # 组搜索过滤器
#      group-search-filter: (uniqueMember={0})
  servlet:
    multipart:
      max-file-size: 100MB
      max-request-size: 100MB
  resources:
    static-locations: classpath:/META-INF/resources/,classpath:/resources/,classpath:/static/,classpath:/public/
  datasource:
    hikari:
      data-source-properties:
        maximum-pool-size: 10         # 最大连接池数量
        minimum-idle: 5               # 最小空闲连接数
        idle-timeout: 300000          # 空闲连接存活5分钟（超时回收）
        max-lifetime: 600000          # 连接最大存活5分钟（主动回收）
        keepalive-time: 300000        # 每5分钟执行一次心跳防断连
        validation-timeout: 3000      # 校验超时时间3秒
        connection-timeout: 30000     # 获取连接超时30秒
        initialization-fail-timeout: 60000  # 启动时等待数据库可用60秒
        prepareThreshold: 0
        cachePrepStmts: false
    url: jdbc:postgresql://${DB_IP:localhost}:${DB_PORT:5432}/group
    username: ${DB_USER:postgres}
    password: ${DB_PASSWORD:postgres}
    driver-class-name: org.postgresql.Driver
  jpa:
    open-in-view: false
    hibernate:
      ddl-auto: update
#    show-sql: true  # 展示 SQL
    properties:
      hibernate:
        multiTenancy: SCHEMA
        format_sql: true
        dialect: org.hibernate.dialect.PostgreSQLDialect  # 确保方言设置正确

# 默认系统初始化配置
system:
  initializer:
    enabled: ${SYSTEM_INITIALIZER_ENABLED:true}
    default-company:
      name: ${DEFAULT_COMPANY_NAME:public}
      schema-name: ${DEFAULT_COMPANY_SCHEMA:public}
      active: ${DEFAULT_COMPANY_ACTIVE:true}
    admin-user:
      username: ${ADMIN_USERNAME:admin}
      email: ${ADMIN_EMAIL:admin@example.com}
      phone-number: ${ADMIN_PHONE_NUMBER:1234567890}
      password: ${ADMIN_PASSWORD:12345}

sequence:
  mode: redis # memory 或 redis 或 database

file:
  upload:
    chunk-temp-path: /tmp/chunk-storage   # 绝对路径
    base-path:  uploads                    # 相对路径
server:
  port: 8080
  address: 0.0.0.0
tcp:
  port: 8088

#app:
#  security:
#    force-password-change-enabled: true  # 初次登录强制修改密码
#    default-password: "12345"   # 用户新增时候的默认密码
#  sequence-sync:
#    enabled: true
#    autoScan: true
#    tables:
#      - table-name: users
#      - table-name: users
#      - table-name: users
#        primary-key-column: user_id

webrtc:
  session-timeout: 300000
  ice-servers:
    - url: "stun:stun.l.google.com:19302"
  turn-enabled: false
  turn-server:
    url: "turn:localhost:3478"
    username: "username"
    credential: "credential"
    protocols: 
      - "udp"
      - "tcp"

logging:
  level:
    org.springframework.web: DEBUG
    reactor.netty: DEBUG
    root: INFO
jwt:
  private.key: classpath:app.key
  public.key: classpath:app.pub