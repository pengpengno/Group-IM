syntax = "proto3";

package com.github.im.common.connect.model.proto;
option java_package = "com.github.im.common.connect.model.proto";
option java_outer_classname = "Chat";
//import "google/protobuf/any.proto";
import "Account.proto";

// chat 信息
message ChatMessage  {


  int64 msgId = 1 ;  // 服务端的消息标识

  string clientMsgId = 4; // client msg Id 配合 sequenceId 用于QOS ACK

  string content  = 3 ;
  //client-server
  int64 conversationId = 9 ;

  string conversationName = 10 ;

  AccountInfo fromAccountInfo = 2 ;
 // server-client 需要使用 用于指示推送到的客户端
  AccountInfo toAccountInfo = 8 ;

  sint32 clientTimeStamp = 7 ;  //  客户端时间

  sint32 serverTimeStamp = 12 ;   // 服务端时间

  MessageType type = 6 ; // 消息类型

  MessagesStatus messagesStatus = 11; // 消息状态

  int64 sequenceId = 5 ; // generateBy server


  enum MessagesStatus{

      REJECT = 0 ;

//      OFFLINE = 1 ;

      SENTFAIL = 7 ;

//      HISTORY = 10 ;

      READ = 3 ;

      UNREAD = 2 ;

      SENT = 5 ;

//      UNSENT = 11 ;  // 用于客户端标识发送状态
//
//      SENDING = 12 ;


  }


}


enum MessageType{

  TEXT = 0 ;

  FILE = 1 ;

  VIDEO = 3 ;

  IMAGE = 6;

  VOICE = 4 ;

}

/**
*  ACK 应答消息
 */
message AckMessage {
  string clientMsgId = 1;  // 客户端生成的唯一 ID
  string serverMsgId = 2;  // 服务端生成的 msgId / sequenceId
  string conversationId = 3;
  string fromAccount = 4;  // 谁的消息被确认
  int64 ackTimestamp = 5;  // 确认时间戳
  enum AckType {
    RECEIVED = 0; // 已收到
    STORED   = 1; // 已存储
    READ     = 2; // 已读
  }
  AckType type = 6;
}
